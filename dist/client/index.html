<!DOCTYPE html>
<html>

<head>
    <title>Star Fields: Horoscopes and More</title>
    <link href="https://fonts.googleapis.com/css2?family=Neuton&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

<ul id='nav bar'>
    <li><a href="#home">Home</a></li>
    <li><a href="#news">Info</a></li>
    <li><a href="#contact">Contact</a></li>
    <li style="float:right"><a class="active" href="#about">About</a></li>
</ul>

<div id="horoscope-container">
    <h2 style="text-align:center">Starfields</h2>
    <p>A horoscope is a forecast of a person's future, typically including details about their character and circumstances, based on the positions of celestial bodies such as planets and stars at the time of their birth.</p>

    <form id="dateForm">
        <label for="eraSelector">Select Era:</label>
        <select id="eraSelector">
            <option value="AD">AD</option>
            <option value="BC">BC</option>
        </select>
        <br>
        <label for="datepicker">Select a Date:</label>
        <input type="date" id="datepicker" name="datepicker">
        <br>
        <button type="button" onclick="getDateValuesAndReloadIframe()">Submit</button>
        <p id="result"></p>
    </form>

    <script>
        function getDateValuesAndReloadIframe() {
            // Get the selected era from the dropdown
            const selectedEra = document.getElementById("eraSelector").value.charAt(0).toLowerCase();
            // Get the selected date from the input field
            const selectedDate = document.getElementById("datepicker").value;
            // Create a Date object from the selected date string
            const dateObject = new Date(selectedDate);
            // Define an array of month names
            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

            // Extract the year, month, and day
            const fullYear = dateObject.getFullYear();
            const firstDigitOfYear = fullYear.toString().charAt(0); // or use .slice(0, 1)
            const monthIndex = dateObject.getMonth();
            const monthAcronym = monthNames[monthIndex];
            const day = dateObject.getDate().toString().padStart(2, '0');

            // Format the result as "era-year-mon-day"
            const formattedResult = `${fullYear}-${monthAcronym}-${day}`;

            // Display the result
            document.getElementById("result").innerText = `Selected Era: ${selectedEra}, First Digit of Year: ${firstDigitOfYear}, Formatted Date: ${formattedResult}`;

            // Reload the iframe with the new parameters
            const iframe = document.getElementById("starfield-iframe");
            iframe.src = `./stars.html?era=${selectedEra}&dateStr=${formattedResult}&mill=${firstDigitOfYear}`;
        }
    </script>
</div>

<div id="starfield-container">
    <iframe id="starfield-iframe" src="./stars.html" style="border:1px solid;width:100%;height:500px"></iframe>
</div>

<div id='bottom information text'>
    <h2 style="text-align: center">What are horoscopes astronomically?</h2>
    <p>One's horoscope depends on the constellation which astronomical bodies appear to lie in front of from Earth's point of reference. Most generally, when someone asks about your "sign," they are asking for your sun sign, or the constellation in which the sun lies in front of.</p>
</div>

</body>

</html>
